""""added_resource_tags"

Revision ID: 325c35031a08
Revises: cf0b0e62d1ad
Create Date: 2020-07-15 07:55:37.250284

"""
from alembic import op
import sqlalchemy as sa
from sqlalchemy.orm import Session
from sqlalchemy.sql import table, column
from sqlalchemy import update, TEXT


# revision identifiers, used by Alembic.
revision = '325c35031a08'
down_revision = 'cf0b0e62d1ad'
branch_labels = None
depends_on = None


def upgrade():
    op.add_column('resource', sa.Column('tags', sa.TEXT(), nullable=False))

    bind = op.get_bind()
    session = Session(bind=bind)
    rss_table = table('resource', column('tags', TEXT()))
    try:
        upd_stmt = update(rss_table).values(
            tags='{}')
        session.execute(upd_stmt)
        session.commit()
    finally:
        session.close()


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_column('resource', 'tags')
    # ### end Alembic commands ###
